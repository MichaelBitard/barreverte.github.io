---
layout: post
title: Binômer avec un clavier dvorak et un clavier azerty
tags:
- jp
- bonnes pratiques
- debian
- geekeries
- linux
- programmation
- tdd
status: publish
type: post
published: true
meta:
  _edit_last: '3'
---
Nous avons récemment succombé à la geekerie du moment : un clavier <a href="http://typematrix.com/" target="_blank">Type Matrix</a> dvorak.

[caption id="attachment_2679" align="aligncenter" width="300"]<a href="http://www.barreverte.fr/wp-content/uploads/2012/08/tmx-2030_gallery-1.png"><img class="size-medium wp-image-2679" title="tmx-2030_gallery-1" src="http://www.barreverte.fr/wp-content/uploads/2012/08/tmx-2030_gallery-1-300x135.png" alt="Clavier Type Matrix 2030 dvorak" width="300" height="135" /></a> Clavier Type Matrix 2030 dvorak[/caption]

Sous Linux, la commande <tt>setxkbmap</tt> permet de changer le mapping de son clavier. Ainsi, pour passer en Dvorak avec la composition pour les accents (3 touches pour écrire <tt>é</tt> : compose (le Alt de droite), apostrophe, e), il faut écrire :

<script src="https://gist.github.com/3314899.js?file=dvorak"></script>

Après une période d'apprentissage, nous sommes assez contents, mais tout le monde n'est pas prêt ou n'a pas forcément envie de faire cet effort.

Dans un premier temps, j'ai donc mappé sur le raccourci <tt>Windows + F5</tt> une commande de basculement dvorak/azerty. (NB: La touche Windows s'appelle Start sur mon clavier)

J'utilise <a href="http://lxde.org/">LXDE</a> comme gestionnaire de fenêtres, un mapping se rajoute ainsi dans le fichier <tt>~/.config/openbox/lxde-rc.xml</tt> :

<script src="https://gist.github.com/3314957.js?file=lxde-rc.xml"></script>

Le script de bascule <tt>~/bin/switch_dv_fr</tt> est le suivant :

<script src="https://gist.github.com/3315019.js?file=switch_dv_fr.sh"></script>

(<tt>notify-send</tt> permet d'afficher une notification dans Linux)

Ce n'était toujours pas satisfaisant, car il fallait taper une combinaison de touches avant de se passer le clavier. Heuereusement, avec Linux il est possible d'avoir deux claviers branchés avec deux mappings différents. Le programme <tt>xinput</tt> permet de configurer les périphériques d'entrée. Pour obtenir la liste de tous les périphériques branchés sur sa machine, il suffit de taper <tt>xinput list</tt>. Chez moi cela donne :

<script src="https://gist.github.com/3315089.js?file=xinput list"></script>

On constate que mon clavier Type Matrix possède l'identifiant 12 et mon autre clavier (un HID 046a:0023) le 9. Du coup, maintenant que je connais le nom de mes claviers, je peux trouver leurs identifiants et les passer à <tt>setxkbmap</tt> grâce à l'option <tt>--device</tt>. Le script final donne :

<script src="https://gist.github.com/3314811.js?file=configure_keyboards"></script>

Nous pouvons désormais binômer sur mon poste avec deux claviers différents !
